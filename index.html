<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>R Interface to Vamp Audio Analysis Plugins • ReVAMP</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="R Interface to Vamp Audio Analysis Plugins">
<meta name="description" content="Provides an R interface to the Vamp audio analysis plugin system developed by Queen Mary University of London's Centre for Digital Music. Enables loading and running Vamp plugins for various audio analysis tasks including tempo detection, onset detection, spectral analysis, and audio feature extraction. Supports mono and stereo audio with automatic channel adaptation and domain conversion.">
<meta property="og:description" content="Provides an R interface to the Vamp audio analysis plugin system developed by Queen Mary University of London's Centre for Digital Music. Enables loading and running Vamp plugins for various audio analysis tasks including tempo detection, onset detection, spectral analysis, and audio feature extraction. Supports mono and stereo audio with automatic channel adaptation and domain conversion.">
<meta property="og:image" content="http://revamp.ebaker.me.uk/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">ReVAMP</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/introduction.html">Introduction to ReVAMP</a></li>
    <li><a class="dropdown-item" href="articles/vamp-paths.html">Managing Vamp Plugin Paths</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/edwbaker/ReVAMP/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="revamp---r-interface-to-vamp-audio-analysis-plugins-">ReVAMP - R Interface to Vamp Audio Analysis Plugins 
<a class="anchor" aria-label="anchor" href="#revamp---r-interface-to-vamp-audio-analysis-plugins-"></a>
</h1>
</div>
<!-- badges: start -->
<!-- badges: end -->
<p>ReVAMP provides an R interface to the <a href="https://www.vamp-plugins.org/" class="external-link">Vamp audio analysis plugin system</a> developed by Queen Mary University of London’s Centre for Digital Music. It enables R users to load and run Vamp plugins for tasks like tempo detection, onset detection, spectral analysis, and feature extraction.</p>
<div class="section level2">
<h2 id="features">Features<a class="anchor" aria-label="anchor" href="#features"></a>
</h2>
<ul>
<li>
<strong>Comprehensive Plugin Support</strong>: Access to 100+ Vamp plugins for audio analysis</li>
<li>
<strong>Data Frame Output</strong>: Results returned as R data frames for easy analysis and visualization</li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="section level3">
<h3 id="install-r-package">Install R Package<a class="anchor" aria-label="anchor" href="#install-r-package"></a>
</h3>
<p>Install from source:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install dependencies</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Rcpp"</span>, <span class="st">"tuneR"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Install ReVAMP</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"path/to/ReVAMP_1.0.tar.gz"</span>, repos <span class="op">=</span> <span class="cn">NULL</span>, type <span class="op">=</span> <span class="st">"source"</span><span class="op">)</span></span></code></pre></div>
<p>Or install with devtools:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"edwbaker/ReVAMP"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="installing-vamp-plugins">Installing Vamp Plugins<a class="anchor" aria-label="anchor" href="#installing-vamp-plugins"></a>
</h2>
<p>ReVAMP requires external Vamp plugins to be installed.</p>
</div>
<div class="section level2">
<h2 id="quick-start">Quick Start<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://revamp.ebaker.me.uk/" class="external-link">ReVAMP</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tuner.R-forge.R-project.org" class="external-link">tuneR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load audio file</span></span>
<span><span class="va">audio</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tuneR/man/readWave.html" class="external-link">readWave</a></span><span class="op">(</span><span class="st">"myaudio.wav"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run amplitude follower and get results as data frame</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/runPlugin.html">runPlugin</a></span><span class="op">(</span></span>
<span>  wave <span class="op">=</span> <span class="va">audio</span>,</span>
<span>  key <span class="op">=</span> <span class="st">"vamp-example-plugins:amplitudefollower"</span>,</span>
<span>  useFrames <span class="op">=</span> <span class="cn">FALSE</span>  <span class="co"># Use timestamps in seconds</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Examine results</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 1</span></span>
<span><span class="co">#&gt;  $ amplitude:'data.frame':   1292 obs. of  4 variables:</span></span>
<span><span class="co">#&gt;   ..$ timestamp: num [1:1292] 0 0.023 0.046 0.07 0.093 ...</span></span>
<span><span class="co">#&gt;   ..$ duration : num [1:1292] NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;   ..$ value    : num [1:1292] 22866 22896 22735 22531 22380 ...</span></span>
<span><span class="co">#&gt;   ..$ label    : chr [1:1292] "" "" "" "" ...</span></span>
<span></span>
<span><span class="co"># Plot amplitude over time</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">amplitude</span><span class="op">$</span><span class="va">timestamp</span>, <span class="va">result</span><span class="op">$</span><span class="va">amplitude</span><span class="op">$</span><span class="va">value</span>, type <span class="op">=</span> <span class="st">"l"</span>,</span>
<span>     xlab <span class="op">=</span> <span class="st">"Time (s)"</span>, ylab <span class="op">=</span> <span class="st">"Amplitude"</span>,</span>
<span>     main <span class="op">=</span> <span class="st">"Audio Amplitude"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="common-use-cases">Common Use Cases<a class="anchor" aria-label="anchor" href="#common-use-cases"></a>
</h2>
<div class="section level3">
<h3 id="onset-detection">Onset Detection<a class="anchor" aria-label="anchor" href="#onset-detection"></a>
</h3>
<p>Detect note onsets in audio:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">onsets</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/runPlugin.html">runPlugin</a></span><span class="op">(</span></span>
<span>  wave <span class="op">=</span> <span class="va">audio</span>,</span>
<span>  key <span class="op">=</span> <span class="st">"vamp-aubio-plugins:aubioonset"</span>,</span>
<span>  useFrames <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View onset times</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">onsets</span><span class="op">$</span><span class="va">onsets</span><span class="op">$</span><span class="va">timestamp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot onsets on waveform</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">audio</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span>v <span class="op">=</span> <span class="va">onsets</span><span class="op">$</span><span class="va">onsets</span><span class="op">$</span><span class="va">timestamp</span> <span class="op">*</span> <span class="va">audio</span><span class="op">@</span><span class="va">samp.rate</span>, col <span class="op">=</span> <span class="st">"red"</span>, lty <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="tempo-detection">Tempo Detection<a class="anchor" aria-label="anchor" href="#tempo-detection"></a>
</h3>
<p>Estimate tempo (BPM):</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tempo</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/runPlugin.html">runPlugin</a></span><span class="op">(</span></span>
<span>  wave <span class="op">=</span> <span class="va">audio</span>,</span>
<span>  key <span class="op">=</span> <span class="st">"vamp-aubio-plugins:aubiotempo"</span>,</span>
<span>  useFrames <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Estimated tempo:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">tempo</span><span class="op">$</span><span class="va">tempo</span><span class="op">$</span><span class="va">value</span><span class="op">)</span>, <span class="st">"BPM\n"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="spectral-centroid">Spectral Centroid<a class="anchor" aria-label="anchor" href="#spectral-centroid"></a>
</h3>
<p>Analyze spectral characteristics:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">centroid</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/runPlugin.html">runPlugin</a></span><span class="op">(</span></span>
<span>  wave <span class="op">=</span> <span class="va">audio</span>,</span>
<span>  key <span class="op">=</span> <span class="st">"vamp-example-plugins:spectralcentroid"</span>,</span>
<span>  useFrames <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">centroid</span><span class="op">$</span><span class="va">logcentroid</span><span class="op">$</span><span class="va">timestamp</span>, <span class="va">centroid</span><span class="op">$</span><span class="va">logcentroid</span><span class="op">$</span><span class="va">value</span>, type <span class="op">=</span> <span class="st">"l"</span>,</span>
<span>     xlab <span class="op">=</span> <span class="st">"Time (s)"</span>, ylab <span class="op">=</span> <span class="st">"Log Centroid"</span>,</span>
<span>     main <span class="op">=</span> <span class="st">"Spectral Centroid Over Time"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="package-information">Package Information<a class="anchor" aria-label="anchor" href="#package-information"></a>
</h2>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get Vamp API/SDK version info</span></span>
<span><span class="fu"><a href="reference/vampInfo.html">vampInfo</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># List plugin search paths</span></span>
<span><span class="fu"><a href="reference/vampPaths.html">vampPaths</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># List all installed plugins with details</span></span>
<span><span class="va">plugins</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/vampPlugins.html">vampPlugins</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">plugins</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get parameters for a specific plugin</span></span>
<span><span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/vampPluginParams.html">vampPluginParams</a></span><span class="op">(</span><span class="st">"vamp-aubio-plugins:aubioonset"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">params</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="architecture">Architecture<a class="anchor" aria-label="anchor" href="#architecture"></a>
</h2>
<p>ReVAMP consists of three layers:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Vamp Plugin SDK</strong> (<code>inst/vamp/</code>): C++ libraries defining the Vamp plugin interface</li>
<li>
<strong>Vamp Host SDK</strong> (<code>src/Plugin*.cpp</code>): C++ host implementation that loads and manages plugins</li>
<li>
<strong>R Interface</strong> (<code>src/R_host.cpp</code>): Rcpp bindings exposing functionality to R</li>
</ol>
<p>Key features: - <strong>PluginLoader</strong>: Discovers and loads Vamp plugins from system directories - <strong>Plugin Adapters</strong>: Automatically handle channel mixing, domain conversion (time/frequency), and buffering - <strong>DataFrame Output</strong>: Collects features in memory and returns structured data to R</p>
</div>
<div class="section level2">
<h2 id="audio-data-flow">Audio Data Flow<a class="anchor" aria-label="anchor" href="#audio-data-flow"></a>
</h2>
<ol style="list-style-type: decimal">
<li>
<strong>Input</strong>: <code><a href="https://rdrr.io/pkg/tuneR/man/Wave.html" class="external-link">tuneR::Wave</a></code> S4 objects from R</li>
<li>
<strong>Conversion</strong>: Extracted to float buffers in C++</li>
<li>
<strong>Processing</strong>: Fed block-by-block to Vamp plugins with automatic adaptation</li>
<li>
<strong>Output</strong>: Collected in memory and returned as DataFrame to R</li>
<li>
<strong>Optional File</strong>: Can also write to CSV file if <code>outfilename</code> is provided</li>
</ol>
</div>
<div class="section level2">
<h2 id="development">Development<a class="anchor" aria-label="anchor" href="#development"></a>
</h2>
<p>The package uses standard R/Rcpp development tools:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Make changes to code...</span></span>
<span></span>
<span><span class="co"># Regenerate documentation</span></span>
<span><span class="fu">roxygen2</span><span class="fu">::</span><span class="fu">roxygenise</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Install locally</span></span>
<span><span class="fu">install</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run tests</span></span>
<span><span class="fu">test</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run R CMD check</span></span>
<span><span class="fu">check</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ul>
<li>
<strong>Vamp Plugins</strong>: <a href="https://www.vamp-plugins.org/" class="external-link uri">https://www.vamp-plugins.org/</a>
</li>
<li>Cannam, C., Landone, C., &amp; Sandler, M. (2010). Sonic Visualiser: An open source application for viewing, analysing, and annotating music audio files. <em>Proceedings of the 18th ACM International Conference on Multimedia</em>, 1467-1468.</li>
</ul>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>GPL (&gt;= 2)</p>
</div>
<div class="section level2">
<h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a>
</h2>
<p>Ed Baker <a href="mailto:ed@ebaker.me.uk" class="email">ed@ebaker.me.uk</a></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/edwbaker/ReVAMP/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/edwbaker/ReVAMP/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 2)</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing ReVAMP</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Ed Baker <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-5887-9543" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ed Baker.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
